{"ast":null,"code":"var exec = require('child_process').exec;\n\nvar helpers = new function () {\n  var _tests;\n\n  var _names = [];\n\n  var _name;\n\n  var _callback;\n\n  var _runner = function () {\n    if (_name = _names.shift()) {\n      console.log('Running ' + _name);\n\n      _tests[_name]();\n    } else {\n      _callback();\n    }\n  };\n\n  this.exec = function () {\n    var args = Array.prototype.slice.call(arguments);\n    var arg;\n    var cmd = args.shift();\n    var opts = {};\n    var callback; // Optional opts/callback or callback/opts\n\n    while (arg = args.shift()) {\n      if (typeof arg == 'function') {\n        callback = arg;\n      } else {\n        opts = arg;\n      }\n    }\n\n    cmd += ' --trace';\n    var execOpts = opts.execOpts ? opts.execOpts : {};\n    exec(cmd, execOpts, function (err, stdout, stderr) {\n      var out = helpers.trim(stdout);\n\n      if (err) {\n        if (opts.breakOnError === false) {\n          return callback(err);\n        } else {\n          throw err;\n        }\n      }\n\n      if (stderr) {\n        callback(stderr);\n      } else {\n        callback(out);\n      }\n    });\n  };\n\n  this.trim = function (s) {\n    var str = s || '';\n    return str.replace(/^\\s*|\\s*$/g, '');\n  };\n\n  this.parse = function (s) {\n    var str = s || '';\n    str = helpers.trim(str);\n    str = str.replace(/'/g, '\"');\n    return JSON.parse(str);\n  };\n\n  this.run = function (tests, callback) {\n    _tests = tests;\n    _names = Object.keys(tests);\n    _callback = callback;\n\n    _runner();\n  };\n\n  this.next = function () {\n    _runner();\n  };\n}();\nmodule.exports = helpers;","map":{"version":3,"sources":["C:/Users/anafe/OneDrive/Documentos/projeto_com_react2/src/backend/node/node_modules/jake/test/integration/helpers.js"],"names":["exec","require","helpers","_tests","_names","_name","_callback","_runner","shift","console","log","args","Array","prototype","slice","call","arguments","arg","cmd","opts","callback","execOpts","err","stdout","stderr","out","trim","breakOnError","s","str","replace","parse","JSON","run","tests","Object","keys","next","module","exports"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,eAAD,CAAP,CAAyBD,IAApC;;AAEA,IAAIE,OAAO,GAAG,IAAK,YAAY;AAC7B,MAAIC,MAAJ;;AACA,MAAIC,MAAM,GAAG,EAAb;;AACA,MAAIC,KAAJ;;AACA,MAAIC,SAAJ;;AACA,MAAIC,OAAO,GAAG,YAAY;AACxB,QAAKF,KAAK,GAAGD,MAAM,CAACI,KAAP,EAAb,EAA8B;AAC5BC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAaL,KAAzB;;AACAF,MAAAA,MAAM,CAACE,KAAD,CAAN;AACD,KAHD,MAIK;AACHC,MAAAA,SAAS;AACV;AACF,GARD;;AAUA,OAAKN,IAAL,GAAY,YAAY;AACtB,QAAIW,IAAI,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX;AACA,QAAIC,GAAJ;AACA,QAAIC,GAAG,GAAGP,IAAI,CAACH,KAAL,EAAV;AACA,QAAIW,IAAI,GAAG,EAAX;AACA,QAAIC,QAAJ,CALsB,CAMtB;;AACA,WAAQH,GAAG,GAAGN,IAAI,CAACH,KAAL,EAAd,EAA6B;AAC3B,UAAI,OAAOS,GAAP,IAAc,UAAlB,EAA8B;AAC5BG,QAAAA,QAAQ,GAAGH,GAAX;AACD,OAFD,MAGK;AACHE,QAAAA,IAAI,GAAGF,GAAP;AACD;AACF;;AAEDC,IAAAA,GAAG,IAAI,UAAP;AACA,QAAIG,QAAQ,GAAGF,IAAI,CAACE,QAAL,GAAgBF,IAAI,CAACE,QAArB,GAAgC,EAA/C;AACArB,IAAAA,IAAI,CAACkB,GAAD,EAAMG,QAAN,EAAgB,UAAUC,GAAV,EAAeC,MAAf,EAAuBC,MAAvB,EAA+B;AACjD,UAAIC,GAAG,GAAGvB,OAAO,CAACwB,IAAR,CAAaH,MAAb,CAAV;;AACA,UAAID,GAAJ,EAAS;AACP,YAAIH,IAAI,CAACQ,YAAL,KAAsB,KAA1B,EAAiC;AAC/B,iBAAOP,QAAQ,CAACE,GAAD,CAAf;AACD,SAFD,MAGK;AACH,gBAAMA,GAAN;AACD;AACF;;AACD,UAAIE,MAAJ,EAAY;AACVJ,QAAAA,QAAQ,CAACI,MAAD,CAAR;AACD,OAFD,MAGK;AACHJ,QAAAA,QAAQ,CAACK,GAAD,CAAR;AACD;AACF,KAhBG,CAAJ;AAiBD,GAnCD;;AAqCA,OAAKC,IAAL,GAAY,UAAUE,CAAV,EAAa;AACvB,QAAIC,GAAG,GAAGD,CAAC,IAAI,EAAf;AACA,WAAOC,GAAG,CAACC,OAAJ,CAAY,YAAZ,EAA0B,EAA1B,CAAP;AACD,GAHD;;AAKA,OAAKC,KAAL,GAAa,UAAUH,CAAV,EAAa;AACxB,QAAIC,GAAG,GAAGD,CAAC,IAAI,EAAf;AACAC,IAAAA,GAAG,GAAG3B,OAAO,CAACwB,IAAR,CAAaG,GAAb,CAAN;AACAA,IAAAA,GAAG,GAAGA,GAAG,CAACC,OAAJ,CAAY,IAAZ,EAAkB,GAAlB,CAAN;AACA,WAAOE,IAAI,CAACD,KAAL,CAAWF,GAAX,CAAP;AACD,GALD;;AAOA,OAAKI,GAAL,GAAW,UAAUC,KAAV,EAAiBd,QAAjB,EAA2B;AACpCjB,IAAAA,MAAM,GAAG+B,KAAT;AACA9B,IAAAA,MAAM,GAAG+B,MAAM,CAACC,IAAP,CAAYF,KAAZ,CAAT;AACA5B,IAAAA,SAAS,GAAGc,QAAZ;;AACAb,IAAAA,OAAO;AACR,GALD;;AAOA,OAAK8B,IAAL,GAAY,YAAY;AACtB9B,IAAAA,OAAO;AACR,GAFD;AAID,CA3Ea,EAAd;AA6EA+B,MAAM,CAACC,OAAP,GAAiBrC,OAAjB","sourcesContent":["var exec = require('child_process').exec;\n\nvar helpers = new (function () {\n  var _tests;\n  var _names = [];\n  var _name;\n  var _callback;\n  var _runner = function () {\n    if ((_name = _names.shift())) {\n      console.log('Running ' + _name);\n      _tests[_name]();\n    }\n    else {\n      _callback();\n    }\n  };\n\n  this.exec = function () {\n    var args = Array.prototype.slice.call(arguments);\n    var arg;\n    var cmd = args.shift();\n    var opts = {};\n    var callback;\n    // Optional opts/callback or callback/opts\n    while ((arg = args.shift())) {\n      if (typeof arg == 'function') {\n        callback = arg;\n      }\n      else {\n        opts = arg;\n      }\n    }\n\n    cmd += ' --trace';\n    var execOpts = opts.execOpts ? opts.execOpts : {};\n    exec(cmd, execOpts, function (err, stdout, stderr) {\n      var out = helpers.trim(stdout);\n      if (err) {\n        if (opts.breakOnError === false) {\n          return callback(err);\n        }\n        else {\n          throw err;\n        }\n      }\n      if (stderr) {\n        callback(stderr);\n      }\n      else {\n        callback(out);\n      }\n    });\n  };\n\n  this.trim = function (s) {\n    var str = s || '';\n    return str.replace(/^\\s*|\\s*$/g, '');\n  };\n\n  this.parse = function (s) {\n    var str = s || '';\n    str = helpers.trim(str);\n    str = str.replace(/'/g, '\"');\n    return JSON.parse(str);\n  };\n\n  this.run = function (tests, callback) {\n    _tests = tests;\n    _names = Object.keys(tests);\n    _callback = callback;\n    _runner();\n  };\n\n  this.next = function () {\n    _runner();\n  };\n\n})();\n\nmodule.exports = helpers;\n"]},"metadata":{},"sourceType":"module"}