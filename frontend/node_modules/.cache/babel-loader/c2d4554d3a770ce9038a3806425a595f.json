{"ast":null,"code":"/*\n * Jake JavaScript build tool\n * Copyright 2112 Matthew Eernisse (mde@fleegix.org)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n*/\nlet path = require('path');\n\nlet fs = require('fs');\n\nlet existsSync = fs.existsSync;\n\nlet utils = require('./utils'); // Files like jakelib/foobar.jake.js\n\n\nconst JAKELIB_FILE_PAT = /\\.jake$|\\.js$/;\nconst SUPPORTED_EXTENSIONS = {\n  'js': null,\n  'coffee': function () {\n    try {\n      let cs = require('coffeescript');\n\n      if (typeof cs.register == 'function') {\n        cs.register();\n      }\n    } catch (e) {\n      throw new Error('You have a CoffeeScript Jakefile, but have not installed CoffeeScript');\n    }\n  },\n  'ls': function () {\n    try {\n      require('livescript');\n    } catch (e) {\n      throw new Error('You have a LiveScript Jakefile, but have not installed LiveScript');\n    }\n  }\n};\nconst IMPLICIT_JAKEFILE_NAMES = ['Jakefile', 'Gulpfile'];\n\nlet Loader = function () {\n  // Load a Jakefile, running the code inside -- this may result in\n  // tasks getting defined using the original Jake API, e.g.,\n  // `task('foo' ['bar', 'baz']);`, or can also auto-create tasks\n  // from any functions exported from the file\n  function loadFile(filePath) {\n    let exported = require(filePath);\n\n    for (let [key, value] of Object.entries(exported)) {\n      let t;\n\n      if (typeof value == 'function') {\n        t = jake.task(key, value);\n        t.description = '(Exported function)';\n      }\n    }\n  }\n\n  function fileExists(name) {\n    let nameWithExt = null; // Support no file extension as well\n\n    let exts = Object.keys(SUPPORTED_EXTENSIONS).concat(['']);\n    exts.some(ext => {\n      let fname = ext ? `${name}.${ext}` : name;\n\n      if (existsSync(fname)) {\n        nameWithExt = fname;\n        return true;\n      }\n    });\n    return nameWithExt;\n  } // Recursive\n\n\n  function findImplicitJakefile() {\n    let cwd = process.cwd();\n    let names = IMPLICIT_JAKEFILE_NAMES;\n    let found = null;\n    names.some(name => {\n      let n; // Prefer all-lowercase\n\n      n = name.toLowerCase();\n\n      if (found = fileExists(n)) {\n        return found;\n      } // Check mixed-case as well\n\n\n      n = name;\n\n      if (found = fileExists(n)) {\n        return found;\n      }\n    });\n\n    if (found) {\n      return found;\n    } else {\n      process.chdir(\"..\"); // If we've walked all the way up the directory tree,\n      // bail out with no result\n\n      if (cwd === process.cwd()) {\n        return null;\n      }\n\n      return findImplicitJakefile();\n    }\n  }\n\n  this.loadFile = function (fileSpecified) {\n    let jakefile;\n    let origCwd = process.cwd();\n\n    if (fileSpecified) {\n      if (existsSync(fileSpecified)) {\n        jakefile = fileSpecified;\n      }\n    } else {\n      jakefile = findImplicitJakefile();\n    }\n\n    if (jakefile) {\n      let ext = jakefile.split('.')[1];\n      let loaderFunc = SUPPORTED_EXTENSIONS[ext];\n      loaderFunc && loaderFunc();\n      loadFile(utils.file.absolutize(jakefile));\n      return true;\n    } else {\n      if (!fileSpecified) {\n        // Restore the working directory on failure\n        process.chdir(origCwd);\n      }\n\n      return false;\n    }\n  };\n\n  this.loadDirectory = function (d) {\n    let dirname = d || 'jakelib';\n    let dirlist;\n    dirname = utils.file.absolutize(dirname);\n\n    if (existsSync(dirname)) {\n      dirlist = fs.readdirSync(dirname);\n      dirlist.forEach(function (filePath) {\n        if (JAKELIB_FILE_PAT.test(filePath)) {\n          loadFile(path.join(dirname, filePath));\n        }\n      });\n      return true;\n    }\n\n    return false;\n  };\n};\n\n_c = Loader;\n\nmodule.exports = function () {\n  return new Loader();\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Loader\");","map":{"version":3,"sources":["C:/Users/anafe/OneDrive/Documentos/projeto_com_react2/src/backend/node/node_modules/jake/lib/loader.js"],"names":["path","require","fs","existsSync","utils","JAKELIB_FILE_PAT","SUPPORTED_EXTENSIONS","cs","register","e","Error","IMPLICIT_JAKEFILE_NAMES","Loader","loadFile","filePath","exported","key","value","Object","entries","t","jake","task","description","fileExists","name","nameWithExt","exts","keys","concat","some","ext","fname","findImplicitJakefile","cwd","process","names","found","n","toLowerCase","chdir","fileSpecified","jakefile","origCwd","split","loaderFunc","file","absolutize","loadDirectory","d","dirname","dirlist","readdirSync","forEach","test","join","module","exports"],"mappings":"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","sourcesContent":["/*\n * Jake JavaScript build tool\n * Copyright 2112 Matthew Eernisse (mde@fleegix.org)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n*/\n\nlet path = require('path');\nlet fs = require('fs');\nlet existsSync = fs.existsSync;\nlet utils = require('./utils');\n\n// Files like jakelib/foobar.jake.js\nconst JAKELIB_FILE_PAT = /\\.jake$|\\.js$/;\nconst SUPPORTED_EXTENSIONS = {\n  'js': null,\n  'coffee': function () {\n    try {\n      let cs = require('coffeescript');\n      if (typeof cs.register == 'function') {\n        cs.register();\n      }\n    }\n    catch(e) {\n      throw new Error('You have a CoffeeScript Jakefile, but have not installed CoffeeScript');\n    }\n  },\n  'ls': function () {\n    try {\n      require('livescript');\n    }\n    catch (e) {\n      throw new Error('You have a LiveScript Jakefile, but have not installed LiveScript');\n    }\n  }\n};\nconst IMPLICIT_JAKEFILE_NAMES = [\n  'Jakefile',\n  'Gulpfile'\n];\n\nlet Loader = function () {\n  // Load a Jakefile, running the code inside -- this may result in\n  // tasks getting defined using the original Jake API, e.g.,\n  // `task('foo' ['bar', 'baz']);`, or can also auto-create tasks\n  // from any functions exported from the file\n  function loadFile(filePath) {\n    let exported = require(filePath);\n    for (let [key, value] of Object.entries(exported)) {\n      let t;\n      if (typeof value == 'function') {\n        t = jake.task(key, value);\n        t.description = '(Exported function)';\n      }\n    }\n  }\n\n  function fileExists(name) {\n    let nameWithExt = null;\n    // Support no file extension as well\n    let exts = Object.keys(SUPPORTED_EXTENSIONS).concat(['']);\n    exts.some((ext) => {\n      let fname = ext ? `${name}.${ext}` : name;\n      if (existsSync(fname)) {\n        nameWithExt = fname;\n        return true;\n      }\n    });\n    return nameWithExt;\n  }\n\n  // Recursive\n  function findImplicitJakefile() {\n    let cwd = process.cwd();\n    let names = IMPLICIT_JAKEFILE_NAMES;\n    let found = null;\n    names.some((name) => {\n      let n;\n      // Prefer all-lowercase\n      n = name.toLowerCase();\n      if ((found = fileExists(n))) {\n        return found;\n      }\n      // Check mixed-case as well\n      n = name;\n      if ((found = fileExists(n))) {\n        return found;\n      }\n    });\n    if (found) {\n      return found;\n    }\n    else {\n      process.chdir(\"..\");\n      // If we've walked all the way up the directory tree,\n      // bail out with no result\n      if (cwd === process.cwd()) {\n        return null;\n      }\n      return findImplicitJakefile();\n    }\n  }\n\n  this.loadFile = function (fileSpecified) {\n    let jakefile;\n    let origCwd = process.cwd();\n\n    if (fileSpecified) {\n      if (existsSync(fileSpecified)) {\n        jakefile = fileSpecified;\n      }\n    }\n    else {\n      jakefile = findImplicitJakefile();\n    }\n\n    if (jakefile) {\n      let ext = jakefile.split('.')[1];\n      let loaderFunc = SUPPORTED_EXTENSIONS[ext];\n      loaderFunc && loaderFunc();\n\n      loadFile(utils.file.absolutize(jakefile));\n      return true;\n    }\n    else {\n      if (!fileSpecified) {\n        // Restore the working directory on failure\n        process.chdir(origCwd);\n      }\n      return false;\n    }\n  };\n\n  this.loadDirectory = function (d) {\n    let dirname = d || 'jakelib';\n    let dirlist;\n    dirname = utils.file.absolutize(dirname);\n    if (existsSync(dirname)) {\n      dirlist = fs.readdirSync(dirname);\n      dirlist.forEach(function (filePath) {\n        if (JAKELIB_FILE_PAT.test(filePath)) {\n          loadFile(path.join(dirname, filePath));\n        }\n      });\n      return true;\n    }\n    return false;\n  };\n\n};\n\nmodule.exports = function () {\n  return new Loader();\n};\n"]},"metadata":{},"sourceType":"module"}