{"ast":null,"code":"'use strict';\n\nconst EE = require('events').EventEmitter;\n\nconst cons = require('constants');\n\nconst fs = require('fs');\n\nmodule.exports = (f, options, cb) => {\n  if (typeof options === 'function') cb = options, options = {};\n  const p = new Promise((res, rej) => {\n    new Touch(validOpts(options, f, null)).on('done', res).on('error', rej);\n  });\n  return cb ? p.then(res => cb(null, res), cb) : p;\n};\n\nmodule.exports.sync = module.exports.touchSync = (f, options) => (new TouchSync(validOpts(options, f, null)), undefined);\n\nmodule.exports.ftouch = (fd, options, cb) => {\n  if (typeof options === 'function') cb = options, options = {};\n  const p = new Promise((res, rej) => {\n    new Touch(validOpts(options, null, fd)).on('done', res).on('error', rej);\n  });\n  return cb ? p.then(res => cb(null, res), cb) : p;\n};\n\nmodule.exports.ftouchSync = (fd, opt) => (new TouchSync(validOpts(opt, null, fd)), undefined);\n\nconst validOpts = (options, path, fd) => {\n  options = Object.create(options || {});\n  options.fd = fd;\n  options.path = path; // {mtime: true}, {ctime: true}\n  // If set to something else, then treat as epoch ms value\n\n  const now = parseInt(new Date(options.time || Date.now()).getTime() / 1000);\n  if (!options.atime && !options.mtime) options.atime = options.mtime = now;else {\n    if (true === options.atime) options.atime = now;\n    if (true === options.mtime) options.mtime = now;\n  }\n  let oflags = 0;\n  if (!options.force) oflags = oflags | cons.O_RDWR;\n  if (!options.nocreate) oflags = oflags | cons.O_CREAT;\n  options.oflags = oflags;\n  return options;\n};\n\nclass Touch extends EE {\n  constructor(options) {\n    super(options);\n    this.fd = options.fd;\n    this.path = options.path;\n    this.atime = options.atime;\n    this.mtime = options.mtime;\n    this.ref = options.ref;\n    this.nocreate = !!options.nocreate;\n    this.force = !!options.force;\n    this.closeAfter = options.closeAfter;\n    this.oflags = options.oflags;\n    this.options = options;\n\n    if (typeof this.fd !== 'number') {\n      this.closeAfter = true;\n      this.open();\n    } else this.onopen(null, this.fd);\n  }\n\n  emit(ev, data) {\n    // we only emit when either done or erroring\n    // in both cases, need to close\n    this.close();\n    return super.emit(ev, data);\n  }\n\n  close() {\n    if (typeof this.fd === 'number' && this.closeAfter) fs.close(this.fd, () => {});\n  }\n\n  open() {\n    fs.open(this.path, this.oflags, (er, fd) => this.onopen(er, fd));\n  }\n\n  onopen(er, fd) {\n    if (er) {\n      if (er.code === 'EISDIR') this.onopen(null, null);else if (er.code === 'ENOENT' && this.nocreate) this.emit('done');else this.emit('error', er);\n    } else {\n      this.fd = fd;\n      if (this.ref) this.statref();else if (!this.atime || !this.mtime) this.fstat();else this.futimes();\n    }\n  }\n\n  statref() {\n    fs.stat(this.ref, (er, st) => {\n      if (er) this.emit('error', er);else this.onstatref(st);\n    });\n  }\n\n  onstatref(st) {\n    this.atime = this.atime && parseInt(st.atime.getTime() / 1000, 10);\n    this.mtime = this.mtime && parseInt(st.mtime.getTime() / 1000, 10);\n    if (!this.atime || !this.mtime) this.fstat();else this.futimes();\n  }\n\n  fstat() {\n    const stat = this.fd ? 'fstat' : 'stat';\n    const target = this.fd || this.path;\n    fs[stat](target, (er, st) => {\n      if (er) this.emit('error', er);else this.onfstat(st);\n    });\n  }\n\n  onfstat(st) {\n    if (typeof this.atime !== 'number') this.atime = parseInt(st.atime.getTime() / 1000, 10);\n    if (typeof this.mtime !== 'number') this.mtime = parseInt(st.mtime.getTime() / 1000, 10);\n    this.futimes();\n  }\n\n  futimes() {\n    const utimes = this.fd ? 'futimes' : 'utimes';\n    const target = this.fd || this.path;\n    fs[utimes](target, '' + this.atime, '' + this.mtime, er => {\n      if (er) this.emit('error', er);else this.emit('done');\n    });\n  }\n\n}\n\nclass TouchSync extends Touch {\n  open() {\n    try {\n      this.onopen(null, fs.openSync(this.path, this.oflags));\n    } catch (er) {\n      this.onopen(er);\n    }\n  }\n\n  statref() {\n    let threw = true;\n\n    try {\n      this.onstatref(fs.statSync(this.ref));\n      threw = false;\n    } finally {\n      if (threw) this.close();\n    }\n  }\n\n  fstat() {\n    let threw = true;\n    const stat = this.fd ? 'fstatSync' : 'statSync';\n    const target = this.fd || this.path;\n\n    try {\n      this.onfstat(fs[stat](target));\n      threw = false;\n    } finally {\n      if (threw) this.close();\n    }\n  }\n\n  futimes() {\n    let threw = true;\n    const utimes = this.fd ? 'futimesSync' : 'utimesSync';\n    const target = this.fd || this.path;\n\n    try {\n      fs[utimes](target, this.atime, this.mtime);\n      threw = false;\n    } finally {\n      if (threw) this.close();\n    }\n\n    this.emit('done');\n  }\n\n  close() {\n    if (typeof this.fd === 'number' && this.closeAfter) try {\n      fs.closeSync(this.fd);\n    } catch (er) {}\n  }\n\n}","map":{"version":3,"sources":["C:/Users/anafe/OneDrive/Documentos/projeto_com_react2/src/backend/node/node_modules/touch/index.js"],"names":["EE","require","EventEmitter","cons","fs","module","exports","f","options","cb","p","Promise","res","rej","Touch","validOpts","on","then","sync","touchSync","TouchSync","undefined","ftouch","fd","ftouchSync","opt","path","Object","create","now","parseInt","Date","time","getTime","atime","mtime","oflags","force","O_RDWR","nocreate","O_CREAT","constructor","ref","closeAfter","open","onopen","emit","ev","data","close","er","code","statref","fstat","futimes","stat","st","onstatref","target","onfstat","utimes","openSync","threw","statSync","closeSync"],"mappings":"AAAA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBC,YAA7B;;AACA,MAAMC,IAAI,GAAGF,OAAO,CAAC,WAAD,CAApB;;AACA,MAAMG,EAAE,GAAGH,OAAO,CAAC,IAAD,CAAlB;;AAEAI,MAAM,CAACC,OAAP,GAAiB,CAACC,CAAD,EAAIC,OAAJ,EAAaC,EAAb,KAAoB;AACnC,MAAI,OAAOD,OAAP,KAAmB,UAAvB,EACEC,EAAE,GAAGD,OAAL,EAAcA,OAAO,GAAG,EAAxB;AAEF,QAAME,CAAC,GAAG,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AAClC,QAAIC,KAAJ,CAAUC,SAAS,CAACP,OAAD,EAAUD,CAAV,EAAa,IAAb,CAAnB,EACGS,EADH,CACM,MADN,EACcJ,GADd,EACmBI,EADnB,CACsB,OADtB,EAC+BH,GAD/B;AAED,GAHS,CAAV;AAKA,SAAOJ,EAAE,GAAGC,CAAC,CAACO,IAAF,CAAOL,GAAG,IAAIH,EAAE,CAAC,IAAD,EAAOG,GAAP,CAAhB,EAA6BH,EAA7B,CAAH,GAAsCC,CAA/C;AACD,CAVD;;AAYAL,MAAM,CAACC,OAAP,CAAeY,IAAf,GAAsBb,MAAM,CAACC,OAAP,CAAea,SAAf,GAA2B,CAACZ,CAAD,EAAIC,OAAJ,MAC9C,IAAIY,SAAJ,CAAcL,SAAS,CAACP,OAAD,EAAUD,CAAV,EAAa,IAAb,CAAvB,GAA4Cc,SADE,CAAjD;;AAGAhB,MAAM,CAACC,OAAP,CAAegB,MAAf,GAAwB,CAACC,EAAD,EAAKf,OAAL,EAAcC,EAAd,KAAqB;AAC3C,MAAI,OAAOD,OAAP,KAAmB,UAAvB,EACEC,EAAE,GAAGD,OAAL,EAAcA,OAAO,GAAG,EAAxB;AAEF,QAAME,CAAC,GAAG,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AAClC,QAAIC,KAAJ,CAAUC,SAAS,CAACP,OAAD,EAAU,IAAV,EAAgBe,EAAhB,CAAnB,EACGP,EADH,CACM,MADN,EACcJ,GADd,EACmBI,EADnB,CACsB,OADtB,EAC+BH,GAD/B;AAED,GAHS,CAAV;AAKA,SAAOJ,EAAE,GAAGC,CAAC,CAACO,IAAF,CAAOL,GAAG,IAAIH,EAAE,CAAC,IAAD,EAAOG,GAAP,CAAhB,EAA6BH,EAA7B,CAAH,GAAsCC,CAA/C;AACD,CAVD;;AAYAL,MAAM,CAACC,OAAP,CAAekB,UAAf,GAA4B,CAACD,EAAD,EAAKE,GAAL,MACzB,IAAIL,SAAJ,CAAcL,SAAS,CAACU,GAAD,EAAM,IAAN,EAAYF,EAAZ,CAAvB,GAAyCF,SADhB,CAA5B;;AAGA,MAAMN,SAAS,GAAG,CAACP,OAAD,EAAUkB,IAAV,EAAgBH,EAAhB,KAAuB;AACvCf,EAAAA,OAAO,GAAGmB,MAAM,CAACC,MAAP,CAAcpB,OAAO,IAAI,EAAzB,CAAV;AACAA,EAAAA,OAAO,CAACe,EAAR,GAAaA,EAAb;AACAf,EAAAA,OAAO,CAACkB,IAAR,GAAeA,IAAf,CAHuC,CAKvC;AACA;;AACA,QAAMG,GAAG,GAAGC,QAAQ,CAAC,IAAIC,IAAJ,CAASvB,OAAO,CAACwB,IAAR,IAAgBD,IAAI,CAACF,GAAL,EAAzB,EAAqCI,OAArC,KAAiD,IAAlD,CAApB;AACA,MAAI,CAACzB,OAAO,CAAC0B,KAAT,IAAkB,CAAC1B,OAAO,CAAC2B,KAA/B,EACE3B,OAAO,CAAC0B,KAAR,GAAgB1B,OAAO,CAAC2B,KAAR,GAAgBN,GAAhC,CADF,KAEK;AACH,QAAI,SAASrB,OAAO,CAAC0B,KAArB,EACE1B,OAAO,CAAC0B,KAAR,GAAgBL,GAAhB;AAEF,QAAI,SAASrB,OAAO,CAAC2B,KAArB,EACE3B,OAAO,CAAC2B,KAAR,GAAgBN,GAAhB;AACH;AAED,MAAIO,MAAM,GAAG,CAAb;AACA,MAAI,CAAC5B,OAAO,CAAC6B,KAAb,EACED,MAAM,GAAGA,MAAM,GAAGjC,IAAI,CAACmC,MAAvB;AAEF,MAAI,CAAC9B,OAAO,CAAC+B,QAAb,EACEH,MAAM,GAAGA,MAAM,GAAGjC,IAAI,CAACqC,OAAvB;AAEFhC,EAAAA,OAAO,CAAC4B,MAAR,GAAiBA,MAAjB;AACA,SAAO5B,OAAP;AACD,CA3BD;;AA6BA,MAAMM,KAAN,SAAoBd,EAApB,CAAuB;AACrByC,EAAAA,WAAW,CAAEjC,OAAF,EAAW;AACpB,UAAMA,OAAN;AACA,SAAKe,EAAL,GAAUf,OAAO,CAACe,EAAlB;AACA,SAAKG,IAAL,GAAYlB,OAAO,CAACkB,IAApB;AACA,SAAKQ,KAAL,GAAa1B,OAAO,CAAC0B,KAArB;AACA,SAAKC,KAAL,GAAa3B,OAAO,CAAC2B,KAArB;AACA,SAAKO,GAAL,GAAWlC,OAAO,CAACkC,GAAnB;AACA,SAAKH,QAAL,GAAgB,CAAC,CAAC/B,OAAO,CAAC+B,QAA1B;AACA,SAAKF,KAAL,GAAa,CAAC,CAAC7B,OAAO,CAAC6B,KAAvB;AACA,SAAKM,UAAL,GAAkBnC,OAAO,CAACmC,UAA1B;AACA,SAAKP,MAAL,GAAc5B,OAAO,CAAC4B,MAAtB;AACA,SAAK5B,OAAL,GAAeA,OAAf;;AAEA,QAAI,OAAO,KAAKe,EAAZ,KAAmB,QAAvB,EAAiC;AAC/B,WAAKoB,UAAL,GAAkB,IAAlB;AACA,WAAKC,IAAL;AACD,KAHD,MAIE,KAAKC,MAAL,CAAY,IAAZ,EAAkB,KAAKtB,EAAvB;AACH;;AAEDuB,EAAAA,IAAI,CAAEC,EAAF,EAAMC,IAAN,EAAY;AACd;AACA;AACA,SAAKC,KAAL;AACA,WAAO,MAAMH,IAAN,CAAWC,EAAX,EAAeC,IAAf,CAAP;AACD;;AAEDC,EAAAA,KAAK,GAAI;AACP,QAAI,OAAO,KAAK1B,EAAZ,KAAmB,QAAnB,IAA+B,KAAKoB,UAAxC,EACEvC,EAAE,CAAC6C,KAAH,CAAS,KAAK1B,EAAd,EAAkB,MAAM,CAAE,CAA1B;AACH;;AAEDqB,EAAAA,IAAI,GAAI;AACNxC,IAAAA,EAAE,CAACwC,IAAH,CAAQ,KAAKlB,IAAb,EAAmB,KAAKU,MAAxB,EAAgC,CAACc,EAAD,EAAK3B,EAAL,KAAY,KAAKsB,MAAL,CAAYK,EAAZ,EAAgB3B,EAAhB,CAA5C;AACD;;AAEDsB,EAAAA,MAAM,CAAEK,EAAF,EAAM3B,EAAN,EAAU;AACd,QAAI2B,EAAJ,EAAQ;AACN,UAAIA,EAAE,CAACC,IAAH,KAAY,QAAhB,EACE,KAAKN,MAAL,CAAY,IAAZ,EAAkB,IAAlB,EADF,KAEK,IAAIK,EAAE,CAACC,IAAH,KAAY,QAAZ,IAAwB,KAAKZ,QAAjC,EACH,KAAKO,IAAL,CAAU,MAAV,EADG,KAGH,KAAKA,IAAL,CAAU,OAAV,EAAmBI,EAAnB;AACH,KAPD,MAOO;AACL,WAAK3B,EAAL,GAAUA,EAAV;AACA,UAAI,KAAKmB,GAAT,EACE,KAAKU,OAAL,GADF,KAEK,IAAI,CAAC,KAAKlB,KAAN,IAAe,CAAC,KAAKC,KAAzB,EACH,KAAKkB,KAAL,GADG,KAGH,KAAKC,OAAL;AACH;AACF;;AAEDF,EAAAA,OAAO,GAAI;AACThD,IAAAA,EAAE,CAACmD,IAAH,CAAQ,KAAKb,GAAb,EAAkB,CAACQ,EAAD,EAAKM,EAAL,KAAY;AAC5B,UAAIN,EAAJ,EACE,KAAKJ,IAAL,CAAU,OAAV,EAAmBI,EAAnB,EADF,KAGE,KAAKO,SAAL,CAAeD,EAAf;AACH,KALD;AAMD;;AAEDC,EAAAA,SAAS,CAAED,EAAF,EAAM;AACb,SAAKtB,KAAL,GAAa,KAAKA,KAAL,IAAcJ,QAAQ,CAAC0B,EAAE,CAACtB,KAAH,CAASD,OAAT,KAAmB,IAApB,EAA0B,EAA1B,CAAnC;AACA,SAAKE,KAAL,GAAa,KAAKA,KAAL,IAAcL,QAAQ,CAAC0B,EAAE,CAACrB,KAAH,CAASF,OAAT,KAAmB,IAApB,EAA0B,EAA1B,CAAnC;AACA,QAAI,CAAC,KAAKC,KAAN,IAAe,CAAC,KAAKC,KAAzB,EACE,KAAKkB,KAAL,GADF,KAGE,KAAKC,OAAL;AACH;;AAEDD,EAAAA,KAAK,GAAI;AACP,UAAME,IAAI,GAAG,KAAKhC,EAAL,GAAU,OAAV,GAAoB,MAAjC;AACA,UAAMmC,MAAM,GAAG,KAAKnC,EAAL,IAAW,KAAKG,IAA/B;AACAtB,IAAAA,EAAE,CAACmD,IAAD,CAAF,CAASG,MAAT,EAAiB,CAACR,EAAD,EAAKM,EAAL,KAAY;AAC3B,UAAIN,EAAJ,EACE,KAAKJ,IAAL,CAAU,OAAV,EAAmBI,EAAnB,EADF,KAGE,KAAKS,OAAL,CAAaH,EAAb;AACH,KALD;AAMD;;AAEDG,EAAAA,OAAO,CAAEH,EAAF,EAAM;AACX,QAAI,OAAO,KAAKtB,KAAZ,KAAsB,QAA1B,EACE,KAAKA,KAAL,GAAaJ,QAAQ,CAAC0B,EAAE,CAACtB,KAAH,CAASD,OAAT,KAAmB,IAApB,EAA0B,EAA1B,CAArB;AAEF,QAAI,OAAO,KAAKE,KAAZ,KAAsB,QAA1B,EACE,KAAKA,KAAL,GAAaL,QAAQ,CAAC0B,EAAE,CAACrB,KAAH,CAASF,OAAT,KAAmB,IAApB,EAA0B,EAA1B,CAArB;AAEF,SAAKqB,OAAL;AACD;;AAEDA,EAAAA,OAAO,GAAI;AACT,UAAMM,MAAM,GAAG,KAAKrC,EAAL,GAAU,SAAV,GAAsB,QAArC;AACA,UAAMmC,MAAM,GAAG,KAAKnC,EAAL,IAAW,KAAKG,IAA/B;AACAtB,IAAAA,EAAE,CAACwD,MAAD,CAAF,CAAWF,MAAX,EAAmB,KAAG,KAAKxB,KAA3B,EAAkC,KAAG,KAAKC,KAA1C,EAAiDe,EAAE,IAAI;AACrD,UAAIA,EAAJ,EACE,KAAKJ,IAAL,CAAU,OAAV,EAAmBI,EAAnB,EADF,KAGE,KAAKJ,IAAL,CAAU,MAAV;AACH,KALD;AAMD;;AAxGoB;;AA2GvB,MAAM1B,SAAN,SAAwBN,KAAxB,CAA8B;AAC5B8B,EAAAA,IAAI,GAAI;AACN,QAAI;AACF,WAAKC,MAAL,CAAY,IAAZ,EAAkBzC,EAAE,CAACyD,QAAH,CAAY,KAAKnC,IAAjB,EAAuB,KAAKU,MAA5B,CAAlB;AACD,KAFD,CAEE,OAAOc,EAAP,EAAW;AACX,WAAKL,MAAL,CAAYK,EAAZ;AACD;AACF;;AAEDE,EAAAA,OAAO,GAAI;AACT,QAAIU,KAAK,GAAG,IAAZ;;AACA,QAAI;AACF,WAAKL,SAAL,CAAerD,EAAE,CAAC2D,QAAH,CAAY,KAAKrB,GAAjB,CAAf;AACAoB,MAAAA,KAAK,GAAG,KAAR;AACD,KAHD,SAGU;AACR,UAAIA,KAAJ,EACE,KAAKb,KAAL;AACH;AACF;;AAEDI,EAAAA,KAAK,GAAI;AACP,QAAIS,KAAK,GAAG,IAAZ;AACA,UAAMP,IAAI,GAAG,KAAKhC,EAAL,GAAU,WAAV,GAAwB,UAArC;AACA,UAAMmC,MAAM,GAAG,KAAKnC,EAAL,IAAW,KAAKG,IAA/B;;AACA,QAAI;AACF,WAAKiC,OAAL,CAAavD,EAAE,CAACmD,IAAD,CAAF,CAASG,MAAT,CAAb;AACAI,MAAAA,KAAK,GAAG,KAAR;AACD,KAHD,SAGU;AACR,UAAIA,KAAJ,EACE,KAAKb,KAAL;AACH;AACF;;AAEDK,EAAAA,OAAO,GAAI;AACT,QAAIQ,KAAK,GAAG,IAAZ;AACA,UAAMF,MAAM,GAAG,KAAKrC,EAAL,GAAU,aAAV,GAA0B,YAAzC;AACA,UAAMmC,MAAM,GAAG,KAAKnC,EAAL,IAAW,KAAKG,IAA/B;;AACA,QAAI;AACFtB,MAAAA,EAAE,CAACwD,MAAD,CAAF,CAAWF,MAAX,EAAmB,KAAKxB,KAAxB,EAA+B,KAAKC,KAApC;AACA2B,MAAAA,KAAK,GAAG,KAAR;AACD,KAHD,SAGU;AACR,UAAIA,KAAJ,EACE,KAAKb,KAAL;AACH;;AACD,SAAKH,IAAL,CAAU,MAAV;AACD;;AAEDG,EAAAA,KAAK,GAAI;AACP,QAAI,OAAO,KAAK1B,EAAZ,KAAmB,QAAnB,IAA+B,KAAKoB,UAAxC,EACE,IAAI;AAAEvC,MAAAA,EAAE,CAAC4D,SAAH,CAAa,KAAKzC,EAAlB;AAAuB,KAA7B,CAA8B,OAAO2B,EAAP,EAAW,CAAE;AAC9C;;AAlD2B","sourcesContent":["'use strict'\n\nconst EE = require('events').EventEmitter\nconst cons = require('constants')\nconst fs = require('fs')\n\nmodule.exports = (f, options, cb) => {\n  if (typeof options === 'function')\n    cb = options, options = {}\n\n  const p = new Promise((res, rej) => {\n    new Touch(validOpts(options, f, null))\n      .on('done', res).on('error', rej)\n  })\n\n  return cb ? p.then(res => cb(null, res), cb) : p\n}\n\nmodule.exports.sync = module.exports.touchSync = (f, options) =>\n  (new TouchSync(validOpts(options, f, null)), undefined)\n\nmodule.exports.ftouch = (fd, options, cb) => {\n  if (typeof options === 'function')\n    cb = options, options = {}\n\n  const p = new Promise((res, rej) => {\n    new Touch(validOpts(options, null, fd))\n      .on('done', res).on('error', rej)\n  })\n\n  return cb ? p.then(res => cb(null, res), cb) : p\n}\n\nmodule.exports.ftouchSync = (fd, opt) =>\n  (new TouchSync(validOpts(opt, null, fd)), undefined)\n\nconst validOpts = (options, path, fd) => {\n  options = Object.create(options || {})\n  options.fd = fd\n  options.path = path\n\n  // {mtime: true}, {ctime: true}\n  // If set to something else, then treat as epoch ms value\n  const now = parseInt(new Date(options.time || Date.now()).getTime() / 1000)\n  if (!options.atime && !options.mtime)\n    options.atime = options.mtime = now\n  else {\n    if (true === options.atime)\n      options.atime = now\n\n    if (true === options.mtime)\n      options.mtime = now\n  }\n\n  let oflags = 0\n  if (!options.force)\n    oflags = oflags | cons.O_RDWR\n\n  if (!options.nocreate)\n    oflags = oflags | cons.O_CREAT\n\n  options.oflags = oflags\n  return options\n}\n\nclass Touch extends EE {\n  constructor (options) {\n    super(options)\n    this.fd = options.fd\n    this.path = options.path\n    this.atime = options.atime\n    this.mtime = options.mtime\n    this.ref = options.ref\n    this.nocreate = !!options.nocreate\n    this.force = !!options.force\n    this.closeAfter = options.closeAfter\n    this.oflags = options.oflags\n    this.options = options\n\n    if (typeof this.fd !== 'number') {\n      this.closeAfter = true\n      this.open()\n    } else\n      this.onopen(null, this.fd)\n  }\n\n  emit (ev, data) {\n    // we only emit when either done or erroring\n    // in both cases, need to close\n    this.close()\n    return super.emit(ev, data)\n  }\n\n  close () {\n    if (typeof this.fd === 'number' && this.closeAfter)\n      fs.close(this.fd, () => {})\n  }\n\n  open () {\n    fs.open(this.path, this.oflags, (er, fd) => this.onopen(er, fd))\n  }\n\n  onopen (er, fd) {\n    if (er) {\n      if (er.code === 'EISDIR')\n        this.onopen(null, null)\n      else if (er.code === 'ENOENT' && this.nocreate)\n        this.emit('done')\n      else\n        this.emit('error', er)\n    } else {\n      this.fd = fd\n      if (this.ref)\n        this.statref()\n      else if (!this.atime || !this.mtime)\n        this.fstat()\n      else\n        this.futimes()\n    }\n  }\n\n  statref () {\n    fs.stat(this.ref, (er, st) => {\n      if (er)\n        this.emit('error', er)\n      else\n        this.onstatref(st)\n    })\n  }\n\n  onstatref (st) {\n    this.atime = this.atime && parseInt(st.atime.getTime()/1000, 10)\n    this.mtime = this.mtime && parseInt(st.mtime.getTime()/1000, 10)\n    if (!this.atime || !this.mtime)\n      this.fstat()\n    else\n      this.futimes()\n  }\n\n  fstat () {\n    const stat = this.fd ? 'fstat' : 'stat'\n    const target = this.fd || this.path\n    fs[stat](target, (er, st) => {\n      if (er)\n        this.emit('error', er)\n      else\n        this.onfstat(st)\n    })\n  }\n\n  onfstat (st) {\n    if (typeof this.atime !== 'number')\n      this.atime = parseInt(st.atime.getTime()/1000, 10)\n\n    if (typeof this.mtime !== 'number')\n      this.mtime = parseInt(st.mtime.getTime()/1000, 10)\n\n    this.futimes()\n  }\n\n  futimes () {\n    const utimes = this.fd ? 'futimes' : 'utimes'\n    const target = this.fd || this.path\n    fs[utimes](target, ''+this.atime, ''+this.mtime, er => {\n      if (er)\n        this.emit('error', er)\n      else\n        this.emit('done')\n    })\n  }\n}\n\nclass TouchSync extends Touch {\n  open () {\n    try {\n      this.onopen(null, fs.openSync(this.path, this.oflags))\n    } catch (er) {\n      this.onopen(er)\n    }\n  }\n\n  statref () {\n    let threw = true\n    try {\n      this.onstatref(fs.statSync(this.ref))\n      threw = false\n    } finally {\n      if (threw)\n        this.close()\n    }\n  }\n\n  fstat () {\n    let threw = true\n    const stat = this.fd ? 'fstatSync' : 'statSync'\n    const target = this.fd || this.path\n    try {\n      this.onfstat(fs[stat](target))\n      threw = false\n    } finally {\n      if (threw)\n        this.close()\n    }\n  }\n\n  futimes () {\n    let threw = true\n    const utimes = this.fd ? 'futimesSync' : 'utimesSync'\n    const target = this.fd || this.path\n    try {\n      fs[utimes](target, this.atime, this.mtime)\n      threw = false\n    } finally {\n      if (threw)\n        this.close()\n    }\n    this.emit('done')\n  }\n\n  close () {\n    if (typeof this.fd === 'number' && this.closeAfter)\n      try { fs.closeSync(this.fd) } catch (er) {}\n  }\n}\n"]},"metadata":{},"sourceType":"module"}