{"ast":null,"code":"// info about each config option.\nvar debug = process.env.DEBUG_NOPT || process.env.NOPT_DEBUG ? function () {\n  console.error.apply(console, arguments);\n} : function () {};\n\nvar url = require(\"url\"),\n    path = require(\"path\"),\n    Stream = require(\"stream\").Stream,\n    abbrev = require(\"abbrev\");\n\nmodule.exports = exports = nopt;\nexports.clean = clean;\nexports.typeDefs = {\n  String: {\n    type: String,\n    validate: validateString\n  },\n  Boolean: {\n    type: Boolean,\n    validate: validateBoolean\n  },\n  url: {\n    type: url,\n    validate: validateUrl\n  },\n  Number: {\n    type: Number,\n    validate: validateNumber\n  },\n  path: {\n    type: path,\n    validate: validatePath\n  },\n  Stream: {\n    type: Stream,\n    validate: validateStream\n  },\n  Date: {\n    type: Date,\n    validate: validateDate\n  }\n};\n\nfunction nopt(types, shorthands, args, slice) {\n  args = args || process.argv;\n  types = types || {};\n  shorthands = shorthands || {};\n  if (typeof slice !== \"number\") slice = 2;\n  debug(types, shorthands, args, slice);\n  args = args.slice(slice);\n  var data = {},\n      key,\n      remain = [],\n      cooked = args,\n      original = args.slice(0);\n  parse(args, data, remain, types, shorthands); // now data is full\n\n  clean(data, types, exports.typeDefs);\n  data.argv = {\n    remain: remain,\n    cooked: cooked,\n    original: original\n  };\n\n  data.argv.toString = function () {\n    return this.original.map(JSON.stringify).join(\" \");\n  };\n\n  return data;\n}\n\nfunction clean(data, types, typeDefs) {\n  typeDefs = typeDefs || exports.typeDefs;\n  var remove = {},\n      typeDefault = [false, true, null, String, Number];\n  Object.keys(data).forEach(function (k) {\n    if (k === \"argv\") return;\n    var val = data[k],\n        isArray = Array.isArray(val),\n        type = types[k];\n    if (!isArray) val = [val];\n    if (!type) type = typeDefault;\n    if (type === Array) type = typeDefault.concat(Array);\n    if (!Array.isArray(type)) type = [type];\n    debug(\"val=%j\", val);\n    debug(\"types=\", type);\n    val = val.map(function (val) {\n      // if it's an unknown value, then parse false/true/null/numbers/dates\n      if (typeof val === \"string\") {\n        debug(\"string %j\", val);\n        val = val.trim();\n\n        if (val === \"null\" && ~type.indexOf(null) || val === \"true\" && (~type.indexOf(true) || ~type.indexOf(Boolean)) || val === \"false\" && (~type.indexOf(false) || ~type.indexOf(Boolean))) {\n          val = JSON.parse(val);\n          debug(\"jsonable %j\", val);\n        } else if (~type.indexOf(Number) && !isNaN(val)) {\n          debug(\"convert to number\", val);\n          val = +val;\n        } else if (~type.indexOf(Date) && !isNaN(Date.parse(val))) {\n          debug(\"convert to date\", val);\n          val = new Date(val);\n        }\n      }\n\n      if (!types.hasOwnProperty(k)) {\n        return val;\n      } // allow `--no-blah` to set 'blah' to null if null is allowed\n\n\n      if (val === false && ~type.indexOf(null) && !(~type.indexOf(false) || ~type.indexOf(Boolean))) {\n        val = null;\n      }\n\n      var d = {};\n      d[k] = val;\n      debug(\"prevalidated val\", d, val, types[k]);\n\n      if (!validate(d, k, val, types[k], typeDefs)) {\n        if (exports.invalidHandler) {\n          exports.invalidHandler(k, val, types[k], data);\n        } else if (exports.invalidHandler !== false) {\n          debug(\"invalid: \" + k + \"=\" + val, types[k]);\n        }\n\n        return remove;\n      }\n\n      debug(\"validated val\", d, val, types[k]);\n      return d[k];\n    }).filter(function (val) {\n      return val !== remove;\n    });\n    if (!val.length) delete data[k];else if (isArray) {\n      debug(isArray, data[k], val);\n      data[k] = val;\n    } else data[k] = val[0];\n    debug(\"k=%s val=%j\", k, val, data[k]);\n  });\n}\n\nfunction validateString(data, k, val) {\n  data[k] = String(val);\n}\n\nfunction validatePath(data, k, val) {\n  data[k] = path.resolve(String(val));\n  return true;\n}\n\nfunction validateNumber(data, k, val) {\n  debug(\"validate Number %j %j %j\", k, val, isNaN(val));\n  if (isNaN(val)) return false;\n  data[k] = +val;\n}\n\nfunction validateDate(data, k, val) {\n  debug(\"validate Date %j %j %j\", k, val, Date.parse(val));\n  var s = Date.parse(val);\n  if (isNaN(s)) return false;\n  data[k] = new Date(val);\n}\n\nfunction validateBoolean(data, k, val) {\n  if (val instanceof Boolean) val = val.valueOf();else if (typeof val === \"string\") {\n    if (!isNaN(val)) val = !!+val;else if (val === \"null\" || val === \"false\") val = false;else val = true;\n  } else val = !!val;\n  data[k] = val;\n}\n\nfunction validateUrl(data, k, val) {\n  val = url.parse(String(val));\n  if (!val.host) return false;\n  data[k] = val.href;\n}\n\nfunction validateStream(data, k, val) {\n  if (!(val instanceof Stream)) return false;\n  data[k] = val;\n}\n\nfunction validate(data, k, val, type, typeDefs) {\n  // arrays are lists of types.\n  if (Array.isArray(type)) {\n    for (var i = 0, l = type.length; i < l; i++) {\n      if (type[i] === Array) continue;\n      if (validate(data, k, val, type[i], typeDefs)) return true;\n    }\n\n    delete data[k];\n    return false;\n  } // an array of anything?\n\n\n  if (type === Array) return true; // NaN is poisonous.  Means that something is not allowed.\n\n  if (type !== type) {\n    debug(\"Poison NaN\", k, val, type);\n    delete data[k];\n    return false;\n  } // explicit list of values\n\n\n  if (val === type) {\n    debug(\"Explicitly allowed %j\", val); // if (isArray) (data[k] = data[k] || []).push(val)\n    // else data[k] = val\n\n    data[k] = val;\n    return true;\n  } // now go through the list of typeDefs, validate against each one.\n\n\n  var ok = false,\n      types = Object.keys(typeDefs);\n\n  for (var i = 0, l = types.length; i < l; i++) {\n    debug(\"test type %j %j %j\", k, val, types[i]);\n    var t = typeDefs[types[i]];\n\n    if (t && type === t.type) {\n      var d = {};\n      ok = false !== t.validate(d, k, val);\n      val = d[k];\n\n      if (ok) {\n        // if (isArray) (data[k] = data[k] || []).push(val)\n        // else data[k] = val\n        data[k] = val;\n        break;\n      }\n    }\n  }\n\n  debug(\"OK? %j (%j %j %j)\", ok, k, val, types[i]);\n  if (!ok) delete data[k];\n  return ok;\n}\n\nfunction parse(args, data, remain, types, shorthands) {\n  debug(\"parse\", args, data, remain);\n  var key = null,\n      abbrevs = abbrev(Object.keys(types)),\n      shortAbbr = abbrev(Object.keys(shorthands));\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    debug(\"arg\", arg);\n\n    if (arg.match(/^-{2,}$/)) {\n      // done with keys.\n      // the rest are args.\n      remain.push.apply(remain, args.slice(i + 1));\n      args[i] = \"--\";\n      break;\n    }\n\n    if (arg.charAt(0) === \"-\") {\n      if (arg.indexOf(\"=\") !== -1) {\n        var v = arg.split(\"=\");\n        arg = v.shift();\n        v = v.join(\"=\");\n        args.splice.apply(args, [i, 1].concat([arg, v]));\n      } // see if it's a shorthand\n      // if so, splice and back up to re-parse it.\n\n\n      var shRes = resolveShort(arg, shorthands, shortAbbr, abbrevs);\n      debug(\"arg=%j shRes=%j\", arg, shRes);\n\n      if (shRes) {\n        debug(arg, shRes);\n        args.splice.apply(args, [i, 1].concat(shRes));\n\n        if (arg !== shRes[0]) {\n          i--;\n          continue;\n        }\n      }\n\n      arg = arg.replace(/^-+/, \"\");\n      var no = false;\n\n      while (arg.toLowerCase().indexOf(\"no-\") === 0) {\n        no = !no;\n        arg = arg.substr(3);\n      }\n\n      if (abbrevs[arg]) arg = abbrevs[arg];\n      var isArray = types[arg] === Array || Array.isArray(types[arg]) && types[arg].indexOf(Array) !== -1;\n      var val,\n          la = args[i + 1];\n      var isBool = no || types[arg] === Boolean || Array.isArray(types[arg]) && types[arg].indexOf(Boolean) !== -1 || la === \"false\" && (types[arg] === null || Array.isArray(types[arg]) && ~types[arg].indexOf(null));\n\n      if (isBool) {\n        // just set and move along\n        val = !no; // however, also support --bool true or --bool false\n\n        if (la === \"true\" || la === \"false\") {\n          val = JSON.parse(la);\n          la = null;\n          if (no) val = !val;\n          i++;\n        } // also support \"foo\":[Boolean, \"bar\"] and \"--foo bar\"\n\n\n        if (Array.isArray(types[arg]) && la) {\n          if (~types[arg].indexOf(la)) {\n            // an explicit type\n            val = la;\n            i++;\n          } else if (la === \"null\" && ~types[arg].indexOf(null)) {\n            // null allowed\n            val = null;\n            i++;\n          } else if (!la.match(/^-{2,}[^-]/) && !isNaN(la) && ~types[arg].indexOf(Number)) {\n            // number\n            val = +la;\n            i++;\n          } else if (!la.match(/^-[^-]/) && ~types[arg].indexOf(String)) {\n            // string\n            val = la;\n            i++;\n          }\n        }\n\n        if (isArray) (data[arg] = data[arg] || []).push(val);else data[arg] = val;\n        continue;\n      }\n\n      if (la && la.match(/^-{2,}$/)) {\n        la = undefined;\n        i--;\n      }\n\n      val = la === undefined ? true : la;\n      if (isArray) (data[arg] = data[arg] || []).push(val);else data[arg] = val;\n      i++;\n      continue;\n    }\n\n    remain.push(arg);\n  }\n}\n\nfunction resolveShort(arg, shorthands, shortAbbr, abbrevs) {\n  // handle single-char shorthands glommed together, like\n  // npm ls -glp, but only if there is one dash, and only if\n  // all of the chars are single-char shorthands, and it's\n  // not a match to some other abbrev.\n  arg = arg.replace(/^-+/, '');\n\n  if (abbrevs[arg] && !shorthands[arg]) {\n    return null;\n  }\n\n  if (shortAbbr[arg]) {\n    arg = shortAbbr[arg];\n  } else {\n    var singles = shorthands.___singles;\n\n    if (!singles) {\n      singles = Object.keys(shorthands).filter(function (s) {\n        return s.length === 1;\n      }).reduce(function (l, r) {\n        l[r] = true;\n        return l;\n      }, {});\n      shorthands.___singles = singles;\n    }\n\n    var chrs = arg.split(\"\").filter(function (c) {\n      return singles[c];\n    });\n    if (chrs.join(\"\") === arg) return chrs.map(function (c) {\n      return shorthands[c];\n    }).reduce(function (l, r) {\n      return l.concat(r);\n    }, []);\n  }\n\n  if (shorthands[arg] && !Array.isArray(shorthands[arg])) {\n    shorthands[arg] = shorthands[arg].split(/\\s+/);\n  }\n\n  return shorthands[arg];\n}\n\nif (module === require.main) {\n  var assert = require(\"assert\"),\n      util = require(\"util\"),\n      shorthands = {\n    s: [\"--loglevel\", \"silent\"],\n    d: [\"--loglevel\", \"info\"],\n    dd: [\"--loglevel\", \"verbose\"],\n    ddd: [\"--loglevel\", \"silly\"],\n    noreg: [\"--no-registry\"],\n    reg: [\"--registry\"],\n    \"no-reg\": [\"--no-registry\"],\n    silent: [\"--loglevel\", \"silent\"],\n    verbose: [\"--loglevel\", \"verbose\"],\n    h: [\"--usage\"],\n    H: [\"--usage\"],\n    \"?\": [\"--usage\"],\n    help: [\"--usage\"],\n    v: [\"--version\"],\n    f: [\"--force\"],\n    desc: [\"--description\"],\n    \"no-desc\": [\"--no-description\"],\n    \"local\": [\"--no-global\"],\n    l: [\"--long\"],\n    p: [\"--parseable\"],\n    porcelain: [\"--parseable\"],\n    g: [\"--global\"]\n  },\n      types = {\n    aoa: Array,\n    nullstream: [null, Stream],\n    date: Date,\n    str: String,\n    browser: String,\n    cache: path,\n    color: [\"always\", Boolean],\n    depth: Number,\n    description: Boolean,\n    dev: Boolean,\n    editor: path,\n    force: Boolean,\n    global: Boolean,\n    globalconfig: path,\n    group: [String, Number],\n    gzipbin: String,\n    logfd: [Number, Stream],\n    loglevel: [\"silent\", \"win\", \"error\", \"warn\", \"info\", \"verbose\", \"silly\"],\n    long: Boolean,\n    \"node-version\": [false, String],\n    npaturl: url,\n    npat: Boolean,\n    \"onload-script\": [false, String],\n    outfd: [Number, Stream],\n    parseable: Boolean,\n    pre: Boolean,\n    prefix: path,\n    proxy: url,\n    \"rebuild-bundle\": Boolean,\n    registry: url,\n    searchopts: String,\n    searchexclude: [null, String],\n    shell: path,\n    t: [Array, String],\n    tag: String,\n    tar: String,\n    tmp: path,\n    \"unsafe-perm\": Boolean,\n    usage: Boolean,\n    user: String,\n    username: String,\n    userconfig: path,\n    version: Boolean,\n    viewer: path,\n    _exit: Boolean\n  };\n\n  [[\"-v\", {\n    version: true\n  }, []], [\"---v\", {\n    version: true\n  }, []], [\"ls -s --no-reg connect -d\", {\n    loglevel: \"info\",\n    registry: null\n  }, [\"ls\", \"connect\"]], [\"ls ---s foo\", {\n    loglevel: \"silent\"\n  }, [\"ls\", \"foo\"]], [\"ls --registry blargle\", {}, [\"ls\"]], [\"--no-registry\", {\n    registry: null\n  }, []], [\"--no-color true\", {\n    color: false\n  }, []], [\"--no-color false\", {\n    color: true\n  }, []], [\"--no-color\", {\n    color: false\n  }, []], [\"--color false\", {\n    color: false\n  }, []], [\"--color --logfd 7\", {\n    logfd: 7,\n    color: true\n  }, []], [\"--color=true\", {\n    color: true\n  }, []], [\"--logfd=10\", {\n    logfd: 10\n  }, []], [\"--tmp=/tmp -tar=gtar\", {\n    tmp: \"/tmp\",\n    tar: \"gtar\"\n  }, []], [\"--tmp=tmp -tar=gtar\", {\n    tmp: path.resolve(process.cwd(), \"tmp\"),\n    tar: \"gtar\"\n  }, []], [\"--logfd x\", {}, []], [\"a -true -- -no-false\", {\n    true: true\n  }, [\"a\", \"-no-false\"]], [\"a -no-false\", {\n    false: false\n  }, [\"a\"]], [\"a -no-no-true\", {\n    true: true\n  }, [\"a\"]], [\"a -no-no-no-false\", {\n    false: false\n  }, [\"a\"]], [\"---NO-no-No-no-no-no-nO-no-no\" + \"-No-no-no-no-no-no-no-no-no\" + \"-no-no-no-no-NO-NO-no-no-no-no-no-no\" + \"-no-body-can-do-the-boogaloo-like-I-do\", {\n    \"body-can-do-the-boogaloo-like-I-do\": false\n  }, []], [\"we are -no-strangers-to-love \" + \"--you-know the-rules --and so-do-i \" + \"---im-thinking-of=a-full-commitment \" + \"--no-you-would-get-this-from-any-other-guy \" + \"--no-gonna-give-you-up \" + \"-no-gonna-let-you-down=true \" + \"--no-no-gonna-run-around false \" + \"--desert-you=false \" + \"--make-you-cry false \" + \"--no-tell-a-lie \" + \"--no-no-and-hurt-you false\", {\n    \"strangers-to-love\": false,\n    \"you-know\": \"the-rules\",\n    \"and\": \"so-do-i\",\n    \"you-would-get-this-from-any-other-guy\": false,\n    \"gonna-give-you-up\": false,\n    \"gonna-let-you-down\": false,\n    \"gonna-run-around\": false,\n    \"desert-you\": false,\n    \"make-you-cry\": false,\n    \"tell-a-lie\": false,\n    \"and-hurt-you\": false\n  }, [\"we\", \"are\"]], [\"-t one -t two -t three\", {\n    t: [\"one\", \"two\", \"three\"]\n  }, []], [\"-t one -t null -t three four five null\", {\n    t: [\"one\", \"null\", \"three\"]\n  }, [\"four\", \"five\", \"null\"]], [\"-t foo\", {\n    t: [\"foo\"]\n  }, []], [\"--no-t\", {\n    t: [\"false\"]\n  }, []], [\"-no-no-t\", {\n    t: [\"true\"]\n  }, []], [\"-aoa one -aoa null -aoa 100\", {\n    aoa: [\"one\", null, 100]\n  }, []], [\"-str 100\", {\n    str: \"100\"\n  }, []], [\"--color always\", {\n    color: \"always\"\n  }, []], [\"--no-nullstream\", {\n    nullstream: null\n  }, []], [\"--nullstream false\", {\n    nullstream: null\n  }, []], [\"--notadate 2011-01-25\", {\n    notadate: \"2011-01-25\"\n  }, []], [\"--date 2011-01-25\", {\n    date: new Date(\"2011-01-25\")\n  }, []]].forEach(function (test) {\n    var argv = test[0].split(/\\s+/),\n        opts = test[1],\n        rem = test[2],\n        actual = nopt(types, shorthands, argv, 0),\n        parsed = actual.argv;\n    delete actual.argv;\n    console.log(util.inspect(actual, false, 2, true), parsed.remain);\n\n    for (var i in opts) {\n      var e = JSON.stringify(opts[i]),\n          a = JSON.stringify(actual[i] === undefined ? null : actual[i]);\n\n      if (e && typeof e === \"object\") {\n        assert.deepEqual(e, a);\n      } else {\n        assert.equal(e, a);\n      }\n    }\n\n    assert.deepEqual(rem, parsed.remain);\n  });\n}","map":{"version":3,"sources":["C:/Users/anafe/OneDrive/Documentos/projeto_com_react2/src/backend/node/node_modules/nopt/lib/nopt.js"],"names":["debug","process","env","DEBUG_NOPT","NOPT_DEBUG","console","error","apply","arguments","url","require","path","Stream","abbrev","module","exports","nopt","clean","typeDefs","String","type","validate","validateString","Boolean","validateBoolean","validateUrl","Number","validateNumber","validatePath","validateStream","Date","validateDate","types","shorthands","args","slice","argv","data","key","remain","cooked","original","parse","toString","map","JSON","stringify","join","remove","typeDefault","Object","keys","forEach","k","val","isArray","Array","concat","trim","indexOf","isNaN","hasOwnProperty","d","invalidHandler","filter","length","resolve","s","valueOf","host","href","i","l","ok","t","abbrevs","shortAbbr","arg","match","push","charAt","v","split","shift","splice","shRes","resolveShort","replace","no","toLowerCase","substr","la","isBool","undefined","singles","___singles","reduce","r","chrs","c","main","assert","util","dd","ddd","noreg","reg","silent","verbose","h","H","help","f","desc","p","porcelain","g","aoa","nullstream","date","str","browser","cache","color","depth","description","dev","editor","force","global","globalconfig","group","gzipbin","logfd","loglevel","long","npaturl","npat","outfd","parseable","pre","prefix","proxy","registry","searchopts","searchexclude","shell","tag","tar","tmp","usage","user","username","userconfig","version","viewer","_exit","cwd","true","false","notadate","test","opts","rem","actual","parsed","log","inspect","e","a","deepEqual","equal"],"mappings":"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","sourcesContent":["// info about each config option.\n\nvar debug = process.env.DEBUG_NOPT || process.env.NOPT_DEBUG\n  ? function () { console.error.apply(console, arguments) }\n  : function () {}\n\nvar url = require(\"url\")\n  , path = require(\"path\")\n  , Stream = require(\"stream\").Stream\n  , abbrev = require(\"abbrev\")\n\nmodule.exports = exports = nopt\nexports.clean = clean\n\nexports.typeDefs =\n  { String  : { type: String,  validate: validateString  }\n  , Boolean : { type: Boolean, validate: validateBoolean }\n  , url     : { type: url,     validate: validateUrl     }\n  , Number  : { type: Number,  validate: validateNumber  }\n  , path    : { type: path,    validate: validatePath    }\n  , Stream  : { type: Stream,  validate: validateStream  }\n  , Date    : { type: Date,    validate: validateDate    }\n  }\n\nfunction nopt (types, shorthands, args, slice) {\n  args = args || process.argv\n  types = types || {}\n  shorthands = shorthands || {}\n  if (typeof slice !== \"number\") slice = 2\n\n  debug(types, shorthands, args, slice)\n\n  args = args.slice(slice)\n  var data = {}\n    , key\n    , remain = []\n    , cooked = args\n    , original = args.slice(0)\n\n  parse(args, data, remain, types, shorthands)\n  // now data is full\n  clean(data, types, exports.typeDefs)\n  data.argv = {remain:remain,cooked:cooked,original:original}\n  data.argv.toString = function () {\n    return this.original.map(JSON.stringify).join(\" \")\n  }\n  return data\n}\n\nfunction clean (data, types, typeDefs) {\n  typeDefs = typeDefs || exports.typeDefs\n  var remove = {}\n    , typeDefault = [false, true, null, String, Number]\n\n  Object.keys(data).forEach(function (k) {\n    if (k === \"argv\") return\n    var val = data[k]\n      , isArray = Array.isArray(val)\n      , type = types[k]\n    if (!isArray) val = [val]\n    if (!type) type = typeDefault\n    if (type === Array) type = typeDefault.concat(Array)\n    if (!Array.isArray(type)) type = [type]\n\n    debug(\"val=%j\", val)\n    debug(\"types=\", type)\n    val = val.map(function (val) {\n      // if it's an unknown value, then parse false/true/null/numbers/dates\n      if (typeof val === \"string\") {\n        debug(\"string %j\", val)\n        val = val.trim()\n        if ((val === \"null\" && ~type.indexOf(null))\n            || (val === \"true\" &&\n               (~type.indexOf(true) || ~type.indexOf(Boolean)))\n            || (val === \"false\" &&\n               (~type.indexOf(false) || ~type.indexOf(Boolean)))) {\n          val = JSON.parse(val)\n          debug(\"jsonable %j\", val)\n        } else if (~type.indexOf(Number) && !isNaN(val)) {\n          debug(\"convert to number\", val)\n          val = +val\n        } else if (~type.indexOf(Date) && !isNaN(Date.parse(val))) {\n          debug(\"convert to date\", val)\n          val = new Date(val)\n        }\n      }\n\n      if (!types.hasOwnProperty(k)) {\n        return val\n      }\n\n      // allow `--no-blah` to set 'blah' to null if null is allowed\n      if (val === false && ~type.indexOf(null) &&\n          !(~type.indexOf(false) || ~type.indexOf(Boolean))) {\n        val = null\n      }\n\n      var d = {}\n      d[k] = val\n      debug(\"prevalidated val\", d, val, types[k])\n      if (!validate(d, k, val, types[k], typeDefs)) {\n        if (exports.invalidHandler) {\n          exports.invalidHandler(k, val, types[k], data)\n        } else if (exports.invalidHandler !== false) {\n          debug(\"invalid: \"+k+\"=\"+val, types[k])\n        }\n        return remove\n      }\n      debug(\"validated val\", d, val, types[k])\n      return d[k]\n    }).filter(function (val) { return val !== remove })\n\n    if (!val.length) delete data[k]\n    else if (isArray) {\n      debug(isArray, data[k], val)\n      data[k] = val\n    } else data[k] = val[0]\n\n    debug(\"k=%s val=%j\", k, val, data[k])\n  })\n}\n\nfunction validateString (data, k, val) {\n  data[k] = String(val)\n}\n\nfunction validatePath (data, k, val) {\n  data[k] = path.resolve(String(val))\n  return true\n}\n\nfunction validateNumber (data, k, val) {\n  debug(\"validate Number %j %j %j\", k, val, isNaN(val))\n  if (isNaN(val)) return false\n  data[k] = +val\n}\n\nfunction validateDate (data, k, val) {\n  debug(\"validate Date %j %j %j\", k, val, Date.parse(val))\n  var s = Date.parse(val)\n  if (isNaN(s)) return false\n  data[k] = new Date(val)\n}\n\nfunction validateBoolean (data, k, val) {\n  if (val instanceof Boolean) val = val.valueOf()\n  else if (typeof val === \"string\") {\n    if (!isNaN(val)) val = !!(+val)\n    else if (val === \"null\" || val === \"false\") val = false\n    else val = true\n  } else val = !!val\n  data[k] = val\n}\n\nfunction validateUrl (data, k, val) {\n  val = url.parse(String(val))\n  if (!val.host) return false\n  data[k] = val.href\n}\n\nfunction validateStream (data, k, val) {\n  if (!(val instanceof Stream)) return false\n  data[k] = val\n}\n\nfunction validate (data, k, val, type, typeDefs) {\n  // arrays are lists of types.\n  if (Array.isArray(type)) {\n    for (var i = 0, l = type.length; i < l; i ++) {\n      if (type[i] === Array) continue\n      if (validate(data, k, val, type[i], typeDefs)) return true\n    }\n    delete data[k]\n    return false\n  }\n\n  // an array of anything?\n  if (type === Array) return true\n\n  // NaN is poisonous.  Means that something is not allowed.\n  if (type !== type) {\n    debug(\"Poison NaN\", k, val, type)\n    delete data[k]\n    return false\n  }\n\n  // explicit list of values\n  if (val === type) {\n    debug(\"Explicitly allowed %j\", val)\n    // if (isArray) (data[k] = data[k] || []).push(val)\n    // else data[k] = val\n    data[k] = val\n    return true\n  }\n\n  // now go through the list of typeDefs, validate against each one.\n  var ok = false\n    , types = Object.keys(typeDefs)\n  for (var i = 0, l = types.length; i < l; i ++) {\n    debug(\"test type %j %j %j\", k, val, types[i])\n    var t = typeDefs[types[i]]\n    if (t && type === t.type) {\n      var d = {}\n      ok = false !== t.validate(d, k, val)\n      val = d[k]\n      if (ok) {\n        // if (isArray) (data[k] = data[k] || []).push(val)\n        // else data[k] = val\n        data[k] = val\n        break\n      }\n    }\n  }\n  debug(\"OK? %j (%j %j %j)\", ok, k, val, types[i])\n\n  if (!ok) delete data[k]\n  return ok\n}\n\nfunction parse (args, data, remain, types, shorthands) {\n  debug(\"parse\", args, data, remain)\n\n  var key = null\n    , abbrevs = abbrev(Object.keys(types))\n    , shortAbbr = abbrev(Object.keys(shorthands))\n\n  for (var i = 0; i < args.length; i ++) {\n    var arg = args[i]\n    debug(\"arg\", arg)\n\n    if (arg.match(/^-{2,}$/)) {\n      // done with keys.\n      // the rest are args.\n      remain.push.apply(remain, args.slice(i + 1))\n      args[i] = \"--\"\n      break\n    }\n    if (arg.charAt(0) === \"-\") {\n      if (arg.indexOf(\"=\") !== -1) {\n        var v = arg.split(\"=\")\n        arg = v.shift()\n        v = v.join(\"=\")\n        args.splice.apply(args, [i, 1].concat([arg, v]))\n      }\n      // see if it's a shorthand\n      // if so, splice and back up to re-parse it.\n      var shRes = resolveShort(arg, shorthands, shortAbbr, abbrevs)\n      debug(\"arg=%j shRes=%j\", arg, shRes)\n      if (shRes) {\n        debug(arg, shRes)\n        args.splice.apply(args, [i, 1].concat(shRes))\n        if (arg !== shRes[0]) {\n          i --\n          continue\n        }\n      }\n      arg = arg.replace(/^-+/, \"\")\n      var no = false\n      while (arg.toLowerCase().indexOf(\"no-\") === 0) {\n        no = !no\n        arg = arg.substr(3)\n      }\n\n      if (abbrevs[arg]) arg = abbrevs[arg]\n\n      var isArray = types[arg] === Array ||\n        Array.isArray(types[arg]) && types[arg].indexOf(Array) !== -1\n\n      var val\n        , la = args[i + 1]\n\n      var isBool = no ||\n        types[arg] === Boolean ||\n        Array.isArray(types[arg]) && types[arg].indexOf(Boolean) !== -1 ||\n        (la === \"false\" &&\n         (types[arg] === null ||\n          Array.isArray(types[arg]) && ~types[arg].indexOf(null)))\n\n      if (isBool) {\n        // just set and move along\n        val = !no\n        // however, also support --bool true or --bool false\n        if (la === \"true\" || la === \"false\") {\n          val = JSON.parse(la)\n          la = null\n          if (no) val = !val\n          i ++\n        }\n\n        // also support \"foo\":[Boolean, \"bar\"] and \"--foo bar\"\n        if (Array.isArray(types[arg]) && la) {\n          if (~types[arg].indexOf(la)) {\n            // an explicit type\n            val = la\n            i ++\n          } else if ( la === \"null\" && ~types[arg].indexOf(null) ) {\n            // null allowed\n            val = null\n            i ++\n          } else if ( !la.match(/^-{2,}[^-]/) &&\n                      !isNaN(la) &&\n                      ~types[arg].indexOf(Number) ) {\n            // number\n            val = +la\n            i ++\n          } else if ( !la.match(/^-[^-]/) && ~types[arg].indexOf(String) ) {\n            // string\n            val = la\n            i ++\n          }\n        }\n\n        if (isArray) (data[arg] = data[arg] || []).push(val)\n        else data[arg] = val\n\n        continue\n      }\n\n      if (la && la.match(/^-{2,}$/)) {\n        la = undefined\n        i --\n      }\n\n      val = la === undefined ? true : la\n      if (isArray) (data[arg] = data[arg] || []).push(val)\n      else data[arg] = val\n\n      i ++\n      continue\n    }\n    remain.push(arg)\n  }\n}\n\nfunction resolveShort (arg, shorthands, shortAbbr, abbrevs) {\n  // handle single-char shorthands glommed together, like\n  // npm ls -glp, but only if there is one dash, and only if\n  // all of the chars are single-char shorthands, and it's\n  // not a match to some other abbrev.\n  arg = arg.replace(/^-+/, '')\n  if (abbrevs[arg] && !shorthands[arg]) {\n    return null\n  }\n  if (shortAbbr[arg]) {\n    arg = shortAbbr[arg]\n  } else {\n    var singles = shorthands.___singles\n    if (!singles) {\n      singles = Object.keys(shorthands).filter(function (s) {\n        return s.length === 1\n      }).reduce(function (l,r) { l[r] = true ; return l }, {})\n      shorthands.___singles = singles\n    }\n    var chrs = arg.split(\"\").filter(function (c) {\n      return singles[c]\n    })\n    if (chrs.join(\"\") === arg) return chrs.map(function (c) {\n      return shorthands[c]\n    }).reduce(function (l, r) {\n      return l.concat(r)\n    }, [])\n  }\n\n  if (shorthands[arg] && !Array.isArray(shorthands[arg])) {\n    shorthands[arg] = shorthands[arg].split(/\\s+/)\n  }\n  return shorthands[arg]\n}\n\nif (module === require.main) {\nvar assert = require(\"assert\")\n  , util = require(\"util\")\n\n  , shorthands =\n    { s : [\"--loglevel\", \"silent\"]\n    , d : [\"--loglevel\", \"info\"]\n    , dd : [\"--loglevel\", \"verbose\"]\n    , ddd : [\"--loglevel\", \"silly\"]\n    , noreg : [\"--no-registry\"]\n    , reg : [\"--registry\"]\n    , \"no-reg\" : [\"--no-registry\"]\n    , silent : [\"--loglevel\", \"silent\"]\n    , verbose : [\"--loglevel\", \"verbose\"]\n    , h : [\"--usage\"]\n    , H : [\"--usage\"]\n    , \"?\" : [\"--usage\"]\n    , help : [\"--usage\"]\n    , v : [\"--version\"]\n    , f : [\"--force\"]\n    , desc : [\"--description\"]\n    , \"no-desc\" : [\"--no-description\"]\n    , \"local\" : [\"--no-global\"]\n    , l : [\"--long\"]\n    , p : [\"--parseable\"]\n    , porcelain : [\"--parseable\"]\n    , g : [\"--global\"]\n    }\n\n  , types =\n    { aoa: Array\n    , nullstream: [null, Stream]\n    , date: Date\n    , str: String\n    , browser : String\n    , cache : path\n    , color : [\"always\", Boolean]\n    , depth : Number\n    , description : Boolean\n    , dev : Boolean\n    , editor : path\n    , force : Boolean\n    , global : Boolean\n    , globalconfig : path\n    , group : [String, Number]\n    , gzipbin : String\n    , logfd : [Number, Stream]\n    , loglevel : [\"silent\",\"win\",\"error\",\"warn\",\"info\",\"verbose\",\"silly\"]\n    , long : Boolean\n    , \"node-version\" : [false, String]\n    , npaturl : url\n    , npat : Boolean\n    , \"onload-script\" : [false, String]\n    , outfd : [Number, Stream]\n    , parseable : Boolean\n    , pre: Boolean\n    , prefix: path\n    , proxy : url\n    , \"rebuild-bundle\" : Boolean\n    , registry : url\n    , searchopts : String\n    , searchexclude: [null, String]\n    , shell : path\n    , t: [Array, String]\n    , tag : String\n    , tar : String\n    , tmp : path\n    , \"unsafe-perm\" : Boolean\n    , usage : Boolean\n    , user : String\n    , username : String\n    , userconfig : path\n    , version : Boolean\n    , viewer: path\n    , _exit : Boolean\n    }\n\n; [[\"-v\", {version:true}, []]\n  ,[\"---v\", {version:true}, []]\n  ,[\"ls -s --no-reg connect -d\",\n    {loglevel:\"info\",registry:null},[\"ls\",\"connect\"]]\n  ,[\"ls ---s foo\",{loglevel:\"silent\"},[\"ls\",\"foo\"]]\n  ,[\"ls --registry blargle\", {}, [\"ls\"]]\n  ,[\"--no-registry\", {registry:null}, []]\n  ,[\"--no-color true\", {color:false}, []]\n  ,[\"--no-color false\", {color:true}, []]\n  ,[\"--no-color\", {color:false}, []]\n  ,[\"--color false\", {color:false}, []]\n  ,[\"--color --logfd 7\", {logfd:7,color:true}, []]\n  ,[\"--color=true\", {color:true}, []]\n  ,[\"--logfd=10\", {logfd:10}, []]\n  ,[\"--tmp=/tmp -tar=gtar\",{tmp:\"/tmp\",tar:\"gtar\"},[]]\n  ,[\"--tmp=tmp -tar=gtar\",\n    {tmp:path.resolve(process.cwd(), \"tmp\"),tar:\"gtar\"},[]]\n  ,[\"--logfd x\", {}, []]\n  ,[\"a -true -- -no-false\", {true:true},[\"a\",\"-no-false\"]]\n  ,[\"a -no-false\", {false:false},[\"a\"]]\n  ,[\"a -no-no-true\", {true:true}, [\"a\"]]\n  ,[\"a -no-no-no-false\", {false:false}, [\"a\"]]\n  ,[\"---NO-no-No-no-no-no-nO-no-no\"+\n    \"-No-no-no-no-no-no-no-no-no\"+\n    \"-no-no-no-no-NO-NO-no-no-no-no-no-no\"+\n    \"-no-body-can-do-the-boogaloo-like-I-do\"\n   ,{\"body-can-do-the-boogaloo-like-I-do\":false}, []]\n  ,[\"we are -no-strangers-to-love \"+\n    \"--you-know the-rules --and so-do-i \"+\n    \"---im-thinking-of=a-full-commitment \"+\n    \"--no-you-would-get-this-from-any-other-guy \"+\n    \"--no-gonna-give-you-up \"+\n    \"-no-gonna-let-you-down=true \"+\n    \"--no-no-gonna-run-around false \"+\n    \"--desert-you=false \"+\n    \"--make-you-cry false \"+\n    \"--no-tell-a-lie \"+\n    \"--no-no-and-hurt-you false\"\n   ,{\"strangers-to-love\":false\n    ,\"you-know\":\"the-rules\"\n    ,\"and\":\"so-do-i\"\n    ,\"you-would-get-this-from-any-other-guy\":false\n    ,\"gonna-give-you-up\":false\n    ,\"gonna-let-you-down\":false\n    ,\"gonna-run-around\":false\n    ,\"desert-you\":false\n    ,\"make-you-cry\":false\n    ,\"tell-a-lie\":false\n    ,\"and-hurt-you\":false\n    },[\"we\", \"are\"]]\n  ,[\"-t one -t two -t three\"\n   ,{t: [\"one\", \"two\", \"three\"]}\n   ,[]]\n  ,[\"-t one -t null -t three four five null\"\n   ,{t: [\"one\", \"null\", \"three\"]}\n   ,[\"four\", \"five\", \"null\"]]\n  ,[\"-t foo\"\n   ,{t:[\"foo\"]}\n   ,[]]\n  ,[\"--no-t\"\n   ,{t:[\"false\"]}\n   ,[]]\n  ,[\"-no-no-t\"\n   ,{t:[\"true\"]}\n   ,[]]\n  ,[\"-aoa one -aoa null -aoa 100\"\n   ,{aoa:[\"one\", null, 100]}\n   ,[]]\n  ,[\"-str 100\"\n   ,{str:\"100\"}\n   ,[]]\n  ,[\"--color always\"\n   ,{color:\"always\"}\n   ,[]]\n  ,[\"--no-nullstream\"\n   ,{nullstream:null}\n   ,[]]\n  ,[\"--nullstream false\"\n   ,{nullstream:null}\n   ,[]]\n  ,[\"--notadate 2011-01-25\"\n   ,{notadate: \"2011-01-25\"}\n   ,[]]\n  ,[\"--date 2011-01-25\"\n   ,{date: new Date(\"2011-01-25\")}\n   ,[]]\n  ].forEach(function (test) {\n    var argv = test[0].split(/\\s+/)\n      , opts = test[1]\n      , rem = test[2]\n      , actual = nopt(types, shorthands, argv, 0)\n      , parsed = actual.argv\n    delete actual.argv\n    console.log(util.inspect(actual, false, 2, true), parsed.remain)\n    for (var i in opts) {\n      var e = JSON.stringify(opts[i])\n        , a = JSON.stringify(actual[i] === undefined ? null : actual[i])\n      if (e && typeof e === \"object\") {\n        assert.deepEqual(e, a)\n      } else {\n        assert.equal(e, a)\n      }\n    }\n    assert.deepEqual(rem, parsed.remain)\n  })\n}\n"]},"metadata":{},"sourceType":"module"}